\documentclass[12pt,a4paper]{article}
% \usepackage[english]{babel}
% \usepackage[utf8x]{inputenc}

\usepackage{graphicx} % Required for inserting images.
\usepackage[margin=25mm]{geometry}
\parskip 4.2pt  % Sets spacing between paragraphs.
% \renewcommand{\baselinestretch}{1.5}  % Uncomment for 1.5 spacing between lines.
\parindent 8.4pt  % Sets leading space for paragraphs.
\usepackage[font=sf]{caption} % Changes font of captions.

\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{siunitx}
\usepackage{verbatim}
\usepackage{hyperref} % Required for inserting clickable links.


\title{President Eletction Application Documentation}
\author{Martynas Galkinas}

\begin{document}
\maketitle

\section{Project}
\subsection{Requirement Specification}
Scope of the project: h and loc \\
Conditions:
\begin{itemize}
    \item
        There are multiple (unlimited number) candidates. You can have those
        predefined.
    \item
        Voter can vote for only one of them.
    \item
        No voter can change his/her decision once submitted.
    \item
        There is no need to keep track of any voter data except and identifier,
        region and their vote
    \item
        Assume that customer is identified by third party service, do not
        implement registration or authentication.
\end{itemize}


Tasks:
\begin{enumerate}
    \item
        Implement an endpoint that returns a list of candidates available:
             name,
             number on the list,
             short summary of their agenda.
    \item
        Implement an endpoint that enables voting for the candidate.
    \item
        Implement endpoints that return voting result reports.
        \begin{itemize}
            \item Overall distribution of votes amongst candidates.
            \item Voting result distribution amongst different regions.
            \item The winner endpoint. It must return a single candidate
                if he/she was voted for by more that 50\%. Otherwise
                it must return two most voted candidates.
        \end{itemize}
\end{enumerate}

Requirements:
\begin{itemize}
    \item
        You can use any of the following programming languages Java, Scala, Kotlin, Groovy
    \item
        You may use any frameworks you need.
    \item
        There are no specific requirements for data storage. You can keep it in
        memory.
    \item
        All interaction with an application must be implemented either as REST
        or GraphQL endpoints.
    \item
        Be mindful about naming and comments. Your core must be readable and
        clean.
    \item
        Your final delivery must be either Maven or Gradle Project.
\end{itemize}

\subsection{System project}
\subsubsection{Usage diagram}
\begin{figure}[htbp!]
    \begin{center}
        \includegraphics[width=0.5\columnwidth]{Usage diagram.png}
    \end{center}
    \caption{Use case diagram}
\end{figure}

\subsubsection{Database diagram}
\begin{figure}[htbp!]
    \begin{center}
        \includegraphics[width=0.5\columnwidth]{Database.png}
    \end{center}
    \caption{Database diagram}
\end{figure}
\subsubsection{Class diagram}
\subsubsection{API documentation}
This is a subsection consisting of the API endpoint documentation.
\begin{center}
\begin{tabular}{ |c|c| }
 \hline
 API endpoint & GET /api/election/getCandidates \\ \hline
 Expected response & JSON list of candidates \\ \hline
 Possible response & []\\
 \hline
\end{tabular}
\end{center}

\begin{center}
\begin{tabular}{ |c|c| }
 \hline
 %API endpoint & POST /api/election?voter=voter_id candidate=candidate_id  \\ \hline
 %Request Variables & voter_id - voter identification number  \\ \hline
 %candidate_id - candidates list number \\
 Expected response & {"message": "Successfully submitted vote for candidate No. 1"} \\ \hline
 Possible response & {"message": "Failed to submit vote"} \\ \hline
\end{tabular}
\end{center}

\begin{center}
\begin{tabular}{ |c|c| }
 \hline
 API endpoint & GET /api/election/statistics?type=total \\ \hline
 Expected response & {"Margarita": 1,"Bertalomėja": 2,"Jonas": 7,"Gryčius": 3} \\ \hline
 Possible response & [] \\ \hline
\end{tabular}
\end{center}

\begin{center}
\begin{tabular}{ |c|c| }
 \hline
 API endpoint & /api/election/statistics?type=regional \\ \hline
 Expected response & {"Bertalomėja, Vilnius":1,"Jonas, Kaunas":3,"Jonas, Šiauliai":1,"Margarita, Kaunas":1,"Jonas, Klaipėda":1,"Bertalomėja, Klaipėda":1,"Gryčius, Vilnius":2,"Gryčius, Kaunas":1,"Jonas, Vilnius":2} \\ \hline
 Possible response & [] \\ \hline
\end{tabular}
\end{center}

\begin{center}
\begin{tabular}{ |c|c| }
 \hline
 API endpoint & /api/election/statistics?type=winner \\ \hline
 Expected response & {"Jonas": 7} \\ \hline
 Possible response & {"Jonas": 5,"Gryčius": 4} \\ \hline
\end{tabular}
\end{center}

\section{Testing}
\subsection{Unit tests}
Unit tests were written in JUnit 5

\subsection{Integration tests}
Integration tests were written in Jupiter, manual integration test were performed using Postman tool.

\section{Sources}
\hyperlink{https://gitlab.matrasas.dev/zeburgana/electionbackend}{Gitlab repository - https://gitlab.matrasas.dev/zeburgana/electionbackend}

\end{document}
